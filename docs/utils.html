<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Functions to support the use of gingado">

<title>Utils – gingado</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-8ea72dc5fed832574809a9c94082fbbb.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-9b8f6c33b8a184d254b5eaa30f9d0661.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-db77c3ec39dfe3474f9f96fa411a1105.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="Utils – gingado">
<meta property="og:description" content="Functions to support the use of gingado">
<meta property="og:site_name" content="gingado">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">gingado</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-examples" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Examples</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-examples">    
        <li>
    <a class="dropdown-item" href="./barrolee1994.html">
 <span class="dropdown-text">Economic growth</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./forecast.html">
 <span class="dropdown-text">Forecasting FX rates</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./machine_controls.html">
 <span class="dropdown-text">Effects of labour reform</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-reference" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Reference</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-reference">    
        <li>
    <a class="dropdown-item" href="./augmentation.html">
 <span class="dropdown-text">gingado.augmentation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./datasets.html">
 <span class="dropdown-text">gingado.datasets</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./benchmark.html">
 <span class="dropdown-text">gingado.benchmark</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./estimators.html">
 <span class="dropdown-text">gingado.estimators</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./documentation.html">
 <span class="dropdown-text">gingado.model_documentation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./utils.html">
 <span class="dropdown-text">gingado.utils</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/bis-med-it/gingado"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.sdmx.io"> <i class="bi bi-house-fill" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#support-for-model-documentation" id="toc-support-for-model-documentation" class="nav-link active" data-scroll-target="#support-for-model-documentation">Support for model documentation</a>
  <ul>
  <li><a href="#get_datetime" id="toc-get_datetime" class="nav-link" data-scroll-target="#get_datetime"></a><a id="get_datetime" class="nav-link" data-scroll-target="undefined">get_datetime</a></li>
  <li><a href="#read_attr" id="toc-read_attr" class="nav-link" data-scroll-target="#read_attr"></a><a id="read_attr" class="nav-link" data-scroll-target="undefined">read_attr</a></li>
  </ul></li>
  <li><a href="#support-for-time-series" id="toc-support-for-time-series" class="nav-link" data-scroll-target="#support-for-time-series">Support for time series</a>
  <ul>
  <li><a href="#lag" id="toc-lag" class="nav-link" data-scroll-target="#lag"></a><a id="lag" class="nav-link" data-scroll-target="undefined">Lag</a></li>
  <li><a href="#fit" id="toc-fit" class="nav-link" data-scroll-target="#fit"></a><a id="fit" class="nav-link" data-scroll-target="undefined">fit</a></li>
  <li><a href="#transform" id="toc-transform" class="nav-link" data-scroll-target="#transform"></a><a id="transform" class="nav-link" data-scroll-target="undefined">transform</a></li>
  <li><a href="#fit_transform" id="toc-fit_transform" class="nav-link" data-scroll-target="#fit_transform"></a><a id="fit_transform" class="nav-link" data-scroll-target="undefined">fit_transform</a></li>
  </ul></li>
  <li><a href="#support-for-data-augmentation-with-sdmx" id="toc-support-for-data-augmentation-with-sdmx" class="nav-link" data-scroll-target="#support-for-data-augmentation-with-sdmx">Support for data augmentation with SDMX</a>
  <ul>
  <li><a href="#list_sdmx_sources" id="toc-list_sdmx_sources" class="nav-link" data-scroll-target="#list_sdmx_sources"></a><a id="list_sdmx_sources" class="nav-link" data-scroll-target="undefined">list_SDMX_sources</a></li>
  <li><a href="#list_all_dataflows" id="toc-list_all_dataflows" class="nav-link" data-scroll-target="#list_all_dataflows"></a><a id="list_all_dataflows" class="nav-link" data-scroll-target="undefined">list_all_dataflows</a></li>
  <li><a href="#codelists" id="toc-codelists" class="nav-link" data-scroll-target="#codelists"></a><a id="codelists" class="nav-link" data-scroll-target="undefined">codelists</a></li>
  <li><a href="#load_sdmx_data" id="toc-load_sdmx_data" class="nav-link" data-scroll-target="#load_sdmx_data"></a><a id="load_sdmx_data" class="nav-link" data-scroll-target="undefined">load_SDMX_data</a></li>
  </ul></li>
  <li><a href="#temporal-features" id="toc-temporal-features" class="nav-link" data-scroll-target="#temporal-features">Temporal features</a>
  <ul>
  <li><a href="#get_timefeat" id="toc-get_timefeat" class="nav-link" data-scroll-target="#get_timefeat"></a><a id="get_timefeat" class="nav-link" data-scroll-target="undefined">get_timefeat</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/bis-med-it/gingado/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Utils</h1>
</div>

<div>
  <div class="description">
    Functions to support the use of <code>gingado</code>
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="support-for-model-documentation" class="level2">
<h2 class="anchored" data-anchor-id="support-for-model-documentation">Support for model documentation</h2>
<section id="get_datetime" class="level3">
<h3 class="anchored" data-anchor-id="get_datetime"><a id="get_datetime">get_datetime</a></h3>
<blockquote class="blockquote">
<p>get_datetime <code>()</code></p>
</blockquote>
<pre>Returns the time now</pre>
<div id="81997b30" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> get_datetime()</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="bu">isinstance</span>(d, <span class="bu">str</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="bu">len</span>(d) <span class="op">&gt;</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="read_attr" class="level3">
<h3 class="anchored" data-anchor-id="read_attr"><a id="read_attr">read_attr</a></h3>
<blockquote class="blockquote">
<p>read_attr <code>(obj)</code></p>
</blockquote>
<pre>Reads and yields the type and values of fitted attributes from an object.

Args:
    obj: Object from which attributes will be read.</pre>
<p>Function <code>read_attr</code> helps gingado Documenters to read the object behind the scenes.</p>
<p>It collects the type of estimator, and any attributes resulting from fitting an object (in ie, those that end in “_” without being double underscores).</p>
<p>For example, the attributes of an untrained and a trained random forest are, in sequence:</p>
<div id="cd5f97c0" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> RandomForestRegressor</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="4604f2ae" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>rf_unfit <span class="op">=</span> RandomForestRegressor(n_estimators<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>rf_fit <span class="op">=</span> RandomForestRegressor(n_estimators<span class="op">=</span><span class="dv">3</span>)<span class="op">\</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    .fit([[<span class="dv">1</span>, <span class="dv">0</span>], [<span class="dv">0</span>, <span class="dv">1</span>]], [[<span class="fl">0.5</span>], [<span class="fl">0.5</span>]]) <span class="co"># random numbers</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span>(read_attr(rf_unfit)), <span class="bu">list</span>(read_attr(rf_fit))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>([{'_estimator_type': 'regressor'}],
 [{'_estimator_type': 'regressor'},
  {'estimator_': DecisionTreeRegressor()},
  {'estimators_': [DecisionTreeRegressor(max_features=1.0, random_state=307035849),
    DecisionTreeRegressor(max_features=1.0, random_state=157047997),
    DecisionTreeRegressor(max_features=1.0, random_state=1041815400)]},
  {'estimators_samples_': [array([0, 0], dtype=int32),
    array([0, 0], dtype=int32),
    array([0, 1], dtype=int32)]},
  {'feature_importances_': array([0., 0.])},
  {'n_features_in_': 2},
  {'n_outputs_': 1}])</code></pre>
</div>
</div>
</section>
</section>
<section id="support-for-time-series" class="level2">
<h2 class="anchored" data-anchor-id="support-for-time-series">Support for time series</h2>
<p>Objects of the class <code>Lag</code> are similar to <code>scikit-learn</code>’s transformers.</p>
<section id="lag" class="level3">
<h3 class="anchored" data-anchor-id="lag"><a id="lag">Lag</a></h3>
<blockquote class="blockquote">
<p>Lag <code>(lags=1, jump=0, keep_contemporaneous_X=False)</code></p>
</blockquote>
<pre>A transformer for lagging variables.

Args:
    lags (int): The number of lags to apply.
    jump (int): The number of initial observations to skip before applying the lag.
    keep_contemporaneous_X (bool): Whether to keep the contemporaneous values of X in the output.</pre>
</section>
<section id="fit" class="level3">
<h3 class="anchored" data-anchor-id="fit"><a id="fit">fit</a></h3>
<blockquote class="blockquote">
<p>fit <code>(self, X: numpy.ndarray, y=None)</code></p>
</blockquote>
<pre>Fits the Lag transformer.

Args:
    X (np.ndarray): Array-like data of shape (n_samples, n_features).
    y: Array-like data of shape (n_samples,) or (n_samples, n_targets) or None.
    
Returns:
    self: A fitted version of the `Lag` instance.</pre>
</section>
<section id="transform" class="level3">
<h3 class="anchored" data-anchor-id="transform"><a id="transform">transform</a></h3>
<blockquote class="blockquote">
<p>transform <code>(self, X: numpy.ndarray)</code></p>
</blockquote>
<pre>Applies the lag transformation to the dataset `X`.

Args:
    X (np.ndarray): Array-like data of shape (n_samples, n_features).
    
Returns:
    A lagged version of `X`.</pre>
</section>
<section id="fit_transform" class="level3">
<h3 class="anchored" data-anchor-id="fit_transform"><a id="fit_transform">fit_transform</a></h3>
<blockquote class="blockquote">
<p>fit_transform <code>(self, X, y=None, **fit_params)</code></p>
</blockquote>
<pre>Fit to data, then transform it.

Fits transformer to `X` and `y` with optional parameters `fit_params`
and returns a transformed version of `X`.

Parameters
----------
X : array-like of shape (n_samples, n_features)
    Input samples.

y :  array-like of shape (n_samples,) or (n_samples, n_outputs),                 default=None
    Target values (None for unsupervised transformations).

**fit_params : dict
    Additional fit parameters.

Returns
-------
X_new : ndarray array of shape (n_samples, n_features_new)
    Transformed array.</pre>
<p>The code below demonstrates how <code>Lag</code> works in practice. Note in particular that, because <code>Lag</code> is a transformer, it can be used as part of a <code>scikit-learn</code>’s <code>Pipeline</code>.</p>
<div id="0c56d9b8" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.pipeline <span class="im">import</span> Pipeline</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> StandardScaler</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="ceed7346" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>randomX <span class="op">=</span> np.random.rand(<span class="dv">15</span>, <span class="dv">2</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>randomY <span class="op">=</span> np.random.rand(<span class="dv">15</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>lags <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>jump <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>pipe <span class="op">=</span> Pipeline([</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'scaler'</span>, StandardScaler()),</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    (<span class="st">'lagger'</span>, Lag(lags<span class="op">=</span>lags, jump<span class="op">=</span>jump, keep_contemporaneous_X<span class="op">=</span><span class="va">False</span>))</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>]).fit_transform(randomX, randomY)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Below we confirm that the lagger removes the correct number of rows corresponding to the lagged observations:</p>
<div id="223218ab" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> randomX.shape[<span class="dv">0</span>] <span class="op">-</span> lags <span class="op">-</span> jump <span class="op">==</span> pipe.shape[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And because <code>Lag</code> is a transformer, its parameters (<code>lags</code> and <code>jump</code>) can be calibrated using hyperparameter tuning to achieve the best performance for a model.</p>
</section>
</section>
<section id="support-for-data-augmentation-with-sdmx" class="level2">
<h2 class="anchored" data-anchor-id="support-for-data-augmentation-with-sdmx">Support for data augmentation with SDMX</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>please note that working with SDMX may take some minutes depending on the amount of information you are downloading.</p>
</div>
</div>
<section id="list_sdmx_sources" class="level3">
<h3 class="anchored" data-anchor-id="list_sdmx_sources"><a id="list_sdmx_sources">list_SDMX_sources</a></h3>
<blockquote class="blockquote">
<p>list_SDMX_sources <code>()</code></p>
</blockquote>
<pre>Fetches the list of SDMX sources.

Returns:
    The list of codes representing the SDMX sources available for data download.</pre>
<div id="174eef6f" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>sources <span class="op">=</span> list_SDMX_sources()</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sources)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="bu">len</span>(sources) <span class="op">&gt;</span> <span class="dv">0</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># all elements are of type 'str'</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="bu">sum</span>([<span class="bu">isinstance</span>(src, <span class="bu">str</span>) <span class="cf">for</span> src <span class="kw">in</span> sources]) <span class="op">==</span> <span class="bu">len</span>(sources)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['ABS', 'ABS_JSON', 'AR1', 'BBK', 'BIS', 'COMP', 'ECB', 'EMPL', 'ESTAT', 'ESTAT3', 'ESTAT_COMEXT', 'GROW', 'ILO', 'IMF', 'IMF_beta', 'IMF_beta3', 'INEGI', 'INSEE', 'ISTAT', 'LSD', 'NB', 'NBB', 'OECD', 'OECD_JSON', 'SGR', 'SPC', 'STAT_EE', 'StatCan', 'UNESCO', 'UNICEF', 'UNSD', 'UY110', 'WB', 'WB_WDI']</code></pre>
</div>
</div>
</section>
<section id="list_all_dataflows" class="level3">
<h3 class="anchored" data-anchor-id="list_all_dataflows"><a id="list_all_dataflows">list_all_dataflows</a></h3>
<blockquote class="blockquote">
<p>list_all_dataflows <code>(codes_only: bool = False, return_pandas: bool = True)</code></p>
</blockquote>
<pre>Lists all SDMX dataflows. Note: When using as a parameter to an `AugmentSDMX` object
or to the `load_SDMX_data` function, set `codes_only=True`"

Args:
    codes_only (bool): Whether to return only the dataflow codes.
    return_pandas (bool): Whether to return the result in a pandas DataFrame format.
    
Returns:
    All available dataflows for all SDMX sources.</pre>
<div id="b98700a5" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>dflows <span class="op">=</span> list_all_dataflows(return_pandas<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="bu">isinstance</span>(dflows, <span class="bu">dict</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>all_sources <span class="op">=</span> list_SDMX_sources()</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="bu">len</span>([s <span class="cf">for</span> s <span class="kw">in</span> dflows.keys() <span class="cf">if</span> s <span class="kw">in</span> all_sources]) <span class="op">==</span> <span class="bu">len</span>(dflows.keys())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>list_all_dataflows</code> returns by default a pandas Series, facilitating data discovery by users like so:</p>
<div id="baa55c12" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>dflows <span class="op">=</span> list_all_dataflows(return_pandas<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="bu">type</span>(dflows) <span class="op">==</span> pd.core.series.Series</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>dflows</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>ABS    ABORIGINAL_POP_PROJ                 Projected population, Aboriginal and Torres St...
       ABORIGINAL_POP_PROJ_REMOTE          Projected population, Aboriginal and Torres St...
       ABS_ABORIGINAL_POPPROJ_INDREGION    Projected population, Aboriginal and Torres St...
       ABS_ACLD_LFSTATUS                   Australian Census Longitudinal Dataset (ACLD):...
       ABS_ACLD_TENURE                     Australian Census Longitudinal Dataset (ACLD):...
                                                                 ...                        
UY110  DF_TTT_SEXO_AREA_REF                Tasa de Teletrabajo por sexo y area de referencia
WB     DF_WITS_Tariff_TRAINS                                WITS - UNCTAD TRAINS Tariff Data
       DF_WITS_TradeStats_Development                             WITS TradeStats Devlopment
       DF_WITS_TradeStats_Tariff                                      WITS TradeStats Tariff
       DF_WITS_TradeStats_Trade                                        WITS TradeStats Trade
Name: dataflow, Length: 33070, dtype: object</code></pre>
</div>
</div>
<p>This format allows for more easily searching <code>dflows</code> by source:</p>
<div id="56f760fb" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>list_all_dataflows(codes_only<span class="op">=</span><span class="va">True</span>, return_pandas<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>ABS    0                  ABORIGINAL_POP_PROJ
       1           ABORIGINAL_POP_PROJ_REMOTE
       2     ABS_ABORIGINAL_POPPROJ_INDREGION
       3                    ABS_ACLD_LFSTATUS
       4                      ABS_ACLD_TENURE
                           ...               
UY110  86                DF_TTT_SEXO_AREA_REF
WB     0                DF_WITS_Tariff_TRAINS
       1       DF_WITS_TradeStats_Development
       2            DF_WITS_TradeStats_Tariff
       3             DF_WITS_TradeStats_Trade
Name: dataflow, Length: 33070, dtype: object</code></pre>
</div>
</div>
<div id="5b473732" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>dflows[<span class="st">'BIS'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>BIS_REL_CAL                                     BIS_RELEASE_CALENDAR
WS_CBPOL                                   Central bank policy rates
WS_CBS_PUB                                  BIS consolidated banking
WS_CBTA                                    Central bank total assets
WS_CPMI_CASHLESS                      CPMI cashless payments (T5,T6)
WS_CPMI_CT1                           CPMI comparative tables type 1
WS_CPMI_CT2                           CPMI comparative tables type 2
WS_CPMI_DEVICES                            CPMI payment devices (T4)
WS_CPMI_INSTITUT                              CPMI institutions (T3)
WS_CPMI_MACRO                                     CPMI macro (T1,T2)
WS_CPMI_PARTICIP                  CPMI participants (T7,T10,T12,T15)
WS_CPMI_SYSTEMS     CPMI systems (T8,T9,T11,T13,T14,T16,T17,T18,T19)
WS_CPP                                    Commercial property prices
WS_CREDIT_GAP                                 BIS credit-to-GDP gaps
WS_DEBT_SEC2_PUB    BIS international debt securities (BIS-compiled)
WS_DER_OTC_TOV                              OTC derivatives turnover
WS_DPP                          Detailed residential property prices
WS_DSR                                        BIS debt service ratio
WS_EER                                  BIS effective exchange rates
WS_GLI                                   Global liquidity indicators
WS_LBS_D_PUB                                  BIS locational banking
WS_LONG_CPI                                 BIS long consumer prices
WS_NA_SEC_C3                          BIS debt securities statistics
WS_NA_SEC_DSS                         BIS Debt securities statistics
WS_OTC_DERIV2                            OTC derivatives outstanding
WS_SPP                          Selected residential property prices
WS_TC                                BIS long series on total credit
WS_XRU                                      US dollar exchange rates
WS_XTD_DERIV                             Exchange traded derivatives
Name: dataflow, dtype: object</code></pre>
</div>
</div>
<p>Or the user can search dataflows by their human-readable name instead of their code. For example, this is one way to see if any dataflow has information on interest rates:</p>
<div id="4a12600d" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>dflows[dflows.<span class="bu">str</span>.contains(<span class="st">'Interest rate'</span>, case<span class="op">=</span><span class="va">False</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>ECB     IRS                                            Interest rate statistics
        MIR                                        MFI Interest Rate Statistics
        RIR                                               Retail Interest Rates
ESTAT   TEIMF040                                          3-month-interest rate
        TEIMF100                         Day-to-day money market interest rates
        IRT_ST_A                      Money market interest rates - annual data
        IRT_ST_M                     Money market interest rates - monthly data
        IRT_ST_Q                   Money market interest rates - quarterly data
        EI_MFIR_M                                 Interest rates - monthly data
        ENPE_IRT_LD                     Loan and deposit one year interest rate
        ENPE_IRT_ST                                 Money market interest rates
ESTAT3  IRT_ST_A                      Money market interest rates - annual data
        IRT_ST_M                     Money market interest rates - monthly data
        IRT_ST_Q                   Money market interest rates - quarterly data
        TEIMF040                                          3-month-interest rate
        TEIMF100                         Day-to-day money market interest rates
        EI_MFIR_M                                 Interest rates - monthly data
        ENPE_IRT_LD                     Loan and deposit one year interest rate
        ENPE_IRT_ST                                 Money market interest rates
IMF     6SR                   M&amp;B: Interest Rates and Share Prices (6SR) for...
        INR                                                      Interest rates
        INR_NSTD                                    Interest rates_Non-Standard
NB      GOVT_GENERIC_RATES                               Generic interest rates
        GOVT_IRS                                            Interest rate swaps
Name: dataflow, dtype: object</code></pre>
</div>
</div>
</section>
<section id="codelists" class="level3">
<h3 class="anchored" data-anchor-id="codelists"><a id="codelists">codelists</a></h3>
<blockquote class="blockquote">
<p>codelists <code>(dflow)</code></p>
</blockquote>
<pre>Retrieves the codelist for specific SDMX dataflows.

Args:
    dflow (dict): A dictionary specifying the source as the key and the dataflow (or list of dataflows) as the value.

Returns:
    dict: A dictionary with each source as a key and the values containing the codelist for the specified dataflow(s),detailing code information relevant to the SDMX data structure.</pre>
<p>Once the user finds a dataflow of interest, the function <code>codelists</code> returns a dictionary where each key is a dimension of that dataflow, and each value is that dimension’s codelist.</p>
<p>For example, the dimensions and codelists of the BIS’ dataflow on OTC derivatives outstanding are the following:</p>
<div id="6af9a40c" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dflows[dflows.<span class="bu">str</span>.contains(<span class="st">"OTC"</span>, case<span class="op">=</span><span class="va">False</span>)])</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>cl_OTC <span class="op">=</span> codelists(dflow<span class="op">=</span>{<span class="st">"BIS"</span>: <span class="st">"WS_OTC_DERIV2"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>BIS  WS_DER_OTC_TOV       OTC derivatives turnover
     WS_OTC_DERIV2     OTC derivatives outstanding
Name: dataflow, dtype: object</code></pre>
</div>
</div>
<p>Here is a list of all dimensions for the OTC derivatives outstanding dataflow:</p>
<div id="c694622b" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>cl_OTC_BIS <span class="op">=</span> cl_OTC[<span class="st">"BIS"</span>]</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>cl_OTC_BIS.keys()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<pre><code>dict_keys(['CL_AVAILABILITY', 'CL_BIS_IF_REF_AREA', 'CL_BIS_UNIT', 'CL_COLLECTION', 'CL_CONF_STATUS', 'CL_DECIMALS', 'CL_DER_BASIS', 'CL_DER_INSTR', '3', 'W', 'CL_EX_METHOD', 'CL_FREQ', 'CL_ISSUE_MAT', 'C', 'CL_MARKET_RISK', 'CL_OBS_STATUS', 'D', 'H', 'CL_OD_TYPE', 'CL_RATING', 'CL_SECTOR_CPY', 'CL_SECTOR_UDL', 'CL_SUB_CHANNEL', 'CL_TIME_FORMAT', 'CL_UNIT_MULT'])</code></pre>
</div>
</div>
<p>Below are the codelists of the frequency dimension (“CL_FREQ”) and the counterparty sector (“CL_SECTOR_CPY”):</p>
<div id="9c6072e9" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>cl_OTC_BIS[<span class="st">"CL_FREQ"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<pre><code>CL_FREQ
A                                   Annual
B    Daily - business week (not supported)
D                                    Daily
E                    Event (not supported)
H                              Half-yearly
M                                  Monthly
Q                                Quarterly
W                                   Weekly
Name: Code list for Frequency (FREQ), dtype: object</code></pre>
</div>
</div>
<div id="5e5b7e8f" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>cl_OTC_BIS[<span class="st">"CL_SECTOR_CPY"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">parent</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">CL_SECTOR_CPY</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">A</td>
<td>Total (all counterparties)</td>
<td></td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">B</td>
<td>Reporting dealers</td>
<td>A</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">C</td>
<td>Other financial institutions</td>
<td>A</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">D</td>
<td>Non-reporting banks</td>
<td>C</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">E</td>
<td>Institutional investors</td>
<td>C</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">F</td>
<td>Hedge funds and proprietary trading firms</td>
<td>C</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">G</td>
<td>Official sector financial institutions</td>
<td>C</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">H</td>
<td>Undistributed</td>
<td>C</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">K</td>
<td>Central Counterparties</td>
<td>C</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">L</td>
<td>Banks and securities firms</td>
<td>C</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">M</td>
<td>Insurance and financial guaranty firms</td>
<td>C</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">N</td>
<td>SPVs, SPCs or SPEs</td>
<td>C</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">O</td>
<td>Hedge funds</td>
<td>C</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">P</td>
<td>Other residual financial institutions</td>
<td>C</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">U</td>
<td>Non-financial customers</td>
<td>A</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">V</td>
<td>Prime brokered</td>
<td>A</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">W</td>
<td>Retail-driven</td>
<td>A</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">X</td>
<td>Related Party Trades</td>
<td>A</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Y</td>
<td>Own branches and subsidiaries</td>
<td>A</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Z</td>
<td>Non-reporters</td>
<td>A</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Q</td>
<td>Non-bank electronic market-makers</td>
<td>A</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">R</td>
<td>Other customers</td>
<td>A</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">I</td>
<td>Back-to-back trades</td>
<td>A</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">J</td>
<td>Compression trades</td>
<td>A</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Technical residual (total)</td>
<td></td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Technical residual (other financial institutions)</td>
<td></td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Technical residual (Prime brokered)</td>
<td></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>You can also get codelists for multiple dataflows from the same source:</p>
<div id="cb51e69a" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get codelists for both Exchange Rates and Consumer Prices</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>cl_multiple <span class="op">=</span> codelists({<span class="st">"ECB"</span>: [<span class="st">"EXR"</span>, <span class="st">"ICP"</span>]})</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Show dimensions for each dataflow</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> dataflow, codelist <span class="kw">in</span> cl_multiple[<span class="st">"ECB"</span>].items():</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Dimensions in </span><span class="sc">{</span>dataflow<span class="sc">}</span><span class="ss"> dataflow:"</span>)</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(codelist.keys())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Dimensions in EXR dataflow:
dict_keys(['CL_COLLECTION', 'CL_CURRENCY', 'CL_DECIMALS', 'CL_EXR_SUFFIX', 'CL_EXR_TYPE', 'CL_FREQ', 'CL_OBS_CONF', 'CL_OBS_STATUS', 'CL_ORGANISATION', 'CL_UNIT', 'CL_UNIT_MULT'])

Dimensions in ICP dataflow:
dict_keys(['CL_ADJUSTMENT', 'CL_AREA_EE', 'CL_COLLECTION', 'CL_DECIMALS', 'CL_FREQ', 'CL_ICP_ITEM', 'CL_ICP_SUFFIX', 'CL_OBS_CONF', 'CL_OBS_STATUS', 'CL_ORGANISATION', 'CL_STS_INSTITUTION', 'CL_UNIT', 'CL_UNIT_MULT'])</code></pre>
</div>
</div>
<p>In addition, you can also get codelists from multiple sources:</p>
<div id="6cd5a4e3" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>cl_sources <span class="op">=</span> codelists({<span class="st">"ECB"</span>: <span class="st">"EXR"</span>, <span class="st">"BIS"</span>: <span class="st">"WS_OTC_DERIV2"</span>})</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Available sources:"</span>, cl_sources.keys())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Available sources: dict_keys(['ECB', 'BIS'])</code></pre>
</div>
</div>
<p>The function <code>load_SDMX_data</code> is a convenience function that downloads data from SDMX sources (and any specific dataflows passed as arguments) if they match the key and parameters set by the user.</p>
</section>
<section id="load_sdmx_data" class="level3">
<h3 class="anchored" data-anchor-id="load_sdmx_data"><a id="load_sdmx_data">load_SDMX_data</a></h3>
<blockquote class="blockquote">
<p>load_SDMX_data <code>(sources: dict, keys: dict, params: dict, verbose: bool = True)</code></p>
</blockquote>
<pre>Loads datasets from SDMX.

Args:
    sources (dict): A dictionary with the sources and dataflows per source.
    keys (dict): The keys to be used in the SDMX query.
    params (dict): The parameters to be used in the SDMX query.
    verbose (bool): Whether to communicate download steps to the user.
    
Returns:
    A pandas DataFrame with data from SDMX or None if no data matches the sources, keys, and parameters.</pre>
<div id="ab359592" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> load_SDMX_data(sources<span class="op">=</span>{<span class="st">'ECB'</span>: <span class="st">'CISS'</span>, <span class="st">'BIS'</span>: <span class="st">'WS_CBPOL_D'</span>}, keys<span class="op">=</span>{<span class="st">'FREQ'</span>: <span class="st">'D'</span>}, params<span class="op">=</span>{<span class="st">'startPeriod'</span>: <span class="dv">2003</span>})</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="bu">type</span>(df) <span class="op">==</span> pd.DataFrame</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> df.shape[<span class="dv">0</span>] <span class="op">&gt;</span> <span class="dv">0</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> df.shape[<span class="dv">1</span>] <span class="op">&gt;</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Querying data from ECB's dataflow 'CISS' - Composite Indicator of Systemic Stress...
Querying data from BIS's dataflow 'WS_CBPOL' - Central bank policy rates...</code></pre>
</div>
</div>
</section>
</section>
<section id="temporal-features" class="level2">
<h2 class="anchored" data-anchor-id="temporal-features">Temporal features</h2>
<p>Temporal features, such as the day of the week, month, or hour, provide valuable information for time series data, helping to capture seasonality, trends, and cyclic patterns. These features are especially useful because they represent known future information that can enhance model predictions. The gingado library offers the <code>get_timefeat</code> method to extract these features from a time series:</p>
<section id="get_timefeat" class="level3">
<h3 class="anchored" data-anchor-id="get_timefeat"><a id="get_timefeat">get_timefeat</a></h3>
<blockquote class="blockquote">
<p>get_timefeat <code>(df: pandas.core.frame.DataFrame | pandas.core.series.Series, freq: str | gingado.internals.Frequency, columns: list[str] | None = None, add_to_df: bool = True) -&gt; pandas.core.frame.DataFrame</code></p>
</blockquote>
<pre>Generate temporal features from a DataFrame with a DatetimeIndex.

This function creates various time-based features such as day of week,
day of month, week of year, etc., based on the DatetimeIndex of the input DataFrame.

Args:
    df (pd.DataFrame | pd.Series): Input DataFrame or Series with a DatetimeIndex.
    freq (FrequencyLike): Frequency of the input DataFrame. Can either be a string which is
        a supported pandas frequency alias or an gingado-interal Frequency object.
    columns (list[str], optional): List of colums with temporal feature names that should be
        kept. If None, all default temporal features are returned. Defaults to None.
    add_to_df (bool, optional): If True, append the generated features to the input DataFrame.
        If False, return only the generated features. Defaults to True.

Returns:
    pd.DataFrame: A DataFrame containing the generated temporal features,
        either appended to the input DataFrame or as a separate DataFrame.

Raises:
    ValueError: If the input DataFrame's index is not a DatetimeIndex.</pre>
<p>For instance, using daily data from a DataFrame:</p>
<div id="3d82b38f" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the first few rows of the DataFrame</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>display(df.head())</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract temporal features for daily data</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>temporal <span class="op">=</span> get_timefeat(df, freq<span class="op">=</span><span class="st">"D"</span>, add_to_df<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>display(temporal.head())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">ECB__CISS_D__AT__Z0Z__4F__EC__SS_CIN__IDX</th>
<th data-quarto-table-cell-role="th">ECB__CISS_D__BE__Z0Z__4F__EC__SS_CIN__IDX</th>
<th data-quarto-table-cell-role="th">ECB__CISS_D__CN__Z0Z__4F__EC__SS_CIN__IDX</th>
<th data-quarto-table-cell-role="th">ECB__CISS_D__DE__Z0Z__4F__EC__SS_CIN__IDX</th>
<th data-quarto-table-cell-role="th">ECB__CISS_D__ES__Z0Z__4F__EC__SS_CIN__IDX</th>
<th data-quarto-table-cell-role="th">ECB__CISS_D__FI__Z0Z__4F__EC__SS_CIN__IDX</th>
<th data-quarto-table-cell-role="th">ECB__CISS_D__FR__Z0Z__4F__EC__SS_CIN__IDX</th>
<th data-quarto-table-cell-role="th">ECB__CISS_D__GB__Z0Z__4F__EC__SS_CIN__IDX</th>
<th data-quarto-table-cell-role="th">ECB__CISS_D__IE__Z0Z__4F__EC__SS_CIN__IDX</th>
<th data-quarto-table-cell-role="th">ECB__CISS_D__IT__Z0Z__4F__EC__SS_CIN__IDX</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">BIS__WS_CBPOL_D__SE</th>
<th data-quarto-table-cell-role="th">BIS__WS_CBPOL_D__TH</th>
<th data-quarto-table-cell-role="th">BIS__WS_CBPOL_D__TR</th>
<th data-quarto-table-cell-role="th">BIS__WS_CBPOL_D__US</th>
<th data-quarto-table-cell-role="th">BIS__WS_CBPOL_D__XM</th>
<th data-quarto-table-cell-role="th">BIS__WS_CBPOL_D__ZA</th>
<th data-quarto-table-cell-role="th">BIS__WS_CBPOL_D__AU</th>
<th data-quarto-table-cell-role="th">BIS__WS_CBPOL_D__AR</th>
<th data-quarto-table-cell-role="th">BIS__WS_CBPOL_D__CH</th>
<th data-quarto-table-cell-role="th">BIS__WS_CBPOL_D__CL</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">TIME_PERIOD</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2003-01-01</td>
<td>0.017774</td>
<td>0.042273</td>
<td>NaN</td>
<td>0.107753</td>
<td>0.028552</td>
<td>0.053814</td>
<td>0.005528</td>
<td>0.060809</td>
<td>0.004191</td>
<td>0.057108</td>
<td>...</td>
<td>NaN</td>
<td>1.75</td>
<td>NaN</td>
<td>1.25</td>
<td>2.75</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.75</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2003-01-02</td>
<td>0.023427</td>
<td>0.047823</td>
<td>NaN</td>
<td>0.148028</td>
<td>0.039988</td>
<td>0.075186</td>
<td>0.013415</td>
<td>0.049041</td>
<td>0.014820</td>
<td>0.064289</td>
<td>...</td>
<td>3.75</td>
<td>1.75</td>
<td>44.0</td>
<td>1.25</td>
<td>2.75</td>
<td>13.5</td>
<td>4.75</td>
<td>5.99</td>
<td>0.75</td>
<td>3.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2003-01-03</td>
<td>0.021899</td>
<td>0.043292</td>
<td>NaN</td>
<td>0.141700</td>
<td>0.040378</td>
<td>0.077400</td>
<td>0.014249</td>
<td>0.047883</td>
<td>0.016874</td>
<td>0.064880</td>
<td>...</td>
<td>3.75</td>
<td>1.75</td>
<td>44.0</td>
<td>1.25</td>
<td>2.75</td>
<td>13.5</td>
<td>4.75</td>
<td>6.05</td>
<td>0.75</td>
<td>3.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2003-01-04</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>NaN</td>
<td>1.75</td>
<td>NaN</td>
<td>1.25</td>
<td>2.75</td>
<td>13.5</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2003-01-05</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>...</td>
<td>NaN</td>
<td>1.75</td>
<td>NaN</td>
<td>1.25</td>
<td>2.75</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
</tbody>
</table>

<p>5 rows × 61 columns</p>
</div>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">day_of_week</th>
<th data-quarto-table-cell-role="th">day_of_month</th>
<th data-quarto-table-cell-role="th">day_of_quarter</th>
<th data-quarto-table-cell-role="th">day_of_year</th>
<th data-quarto-table-cell-role="th">week_of_month</th>
<th data-quarto-table-cell-role="th">week_of_quarter</th>
<th data-quarto-table-cell-role="th">week_of_year</th>
<th data-quarto-table-cell-role="th">month_of_quarter</th>
<th data-quarto-table-cell-role="th">month_of_year</th>
<th data-quarto-table-cell-role="th">quarter_of_year</th>
<th data-quarto-table-cell-role="th">quarter_end</th>
<th data-quarto-table-cell-role="th">year_end</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">TIME_PERIOD</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2003-01-01</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2003-01-02</td>
<td>3</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2003-01-03</td>
<td>4</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2003-01-04</td>
<td>5</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2003-01-05</td>
<td>6</td>
<td>5</td>
<td>5</td>
<td>5</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>You can also integrate the temporal features directly into the original DataFrame by setting the <code>add_to_df</code> parameter to True:</p>
<div id="eac7aefc" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate a sample DataFrame with a weekly index</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>df_weekly <span class="op">=</span> pd.DataFrame(</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>{<span class="st">"value"</span>: rng.normal(size<span class="op">=</span><span class="dv">100</span>)},</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    index<span class="op">=</span>pd.date_range(<span class="st">'2000-01-01'</span>, periods<span class="op">=</span><span class="dv">100</span>, freq<span class="op">=</span><span class="st">'W-MON'</span>)</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Add temporal features to the weekly data</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>df_with_timefeat <span class="op">=</span> get_timefeat(df_weekly, freq<span class="op">=</span><span class="st">"W"</span>, add_to_df<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>display(df_with_timefeat.head())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">value</th>
<th data-quarto-table-cell-role="th">week_of_month</th>
<th data-quarto-table-cell-role="th">week_of_quarter</th>
<th data-quarto-table-cell-role="th">week_of_year</th>
<th data-quarto-table-cell-role="th">month_of_quarter</th>
<th data-quarto-table-cell-role="th">month_of_year</th>
<th data-quarto-table-cell-role="th">quarter_of_year</th>
<th data-quarto-table-cell-role="th">quarter_end</th>
<th data-quarto-table-cell-role="th">year_end</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2000-01-03</td>
<td>0.304717</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2000-01-10</td>
<td>-1.039984</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2000-01-17</td>
<td>0.750451</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2000-01-24</td>
<td>0.940565</td>
<td>4</td>
<td>4</td>
<td>4</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2000-01-31</td>
<td>-1.951035</td>
<td>5</td>
<td>5</td>
<td>5</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>If you only need a subset of the temporal features, you can specify the desired feature names:</p>
<div id="265f727f" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate a new DataFrame with a monthly index</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>df_monthly <span class="op">=</span> pd.DataFrame(</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>{<span class="st">"value"</span>: rng.normal(size<span class="op">=</span><span class="dv">24</span>)},</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    index<span class="op">=</span>pd.date_range(<span class="st">"2023-01-01"</span>, periods<span class="op">=</span><span class="dv">24</span>, freq<span class="op">=</span><span class="st">'MS'</span>)</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Only select a subset of temporal features:</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>df_with_timefeat <span class="op">=</span> get_timefeat(df_monthly, freq<span class="op">=</span><span class="st">"MS"</span>, columns<span class="op">=</span>[<span class="st">"month_of_year"</span>, <span class="st">"quarter_of_year"</span>])</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>display(df_with_timefeat.head())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">value</th>
<th data-quarto-table-cell-role="th">month_of_year</th>
<th data-quarto-table-cell-role="th">quarter_of_year</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2023-01-01</td>
<td>-0.378163</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2023-02-01</td>
<td>1.299228</td>
<td>2</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2023-03-01</td>
<td>-0.356264</td>
<td>3</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2023-04-01</td>
<td>0.737516</td>
<td>4</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2023-05-01</td>
<td>-0.933618</td>
<td>5</td>
<td>2</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>In addition to <code>get_timefeat</code>, the gingado library provides the <code>TemporalFeatureTransformer</code> class, which can be used to transform a DataFrame with a temporal index into a DataFrame with additional features:</p>
<div id="923d3c95" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>temp_trf <span class="op">=</span> TemporalFeatureTransformer(freq<span class="op">=</span><span class="st">"W"</span>, features<span class="op">=</span>[<span class="st">"week_of_month"</span>, <span class="st">"week_of_year"</span>, <span class="st">"quarter_of_year"</span>])</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>df_with_timefeat <span class="op">=</span> temp_trf.fit_transform(df_weekly)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>display(df_with_timefeat.head())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">value</th>
<th data-quarto-table-cell-role="th">week_of_month</th>
<th data-quarto-table-cell-role="th">week_of_year</th>
<th data-quarto-table-cell-role="th">quarter_of_year</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2000-01-03</td>
<td>0.304717</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2000-01-10</td>
<td>-1.039984</td>
<td>2</td>
<td>2</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2000-01-17</td>
<td>0.750451</td>
<td>3</td>
<td>3</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2000-01-24</td>
<td>0.940565</td>
<td>4</td>
<td>4</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2000-01-31</td>
<td>-1.951035</td>
<td>5</td>
<td>5</td>
<td>1</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/bis-med-it/gingado/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>